(this["webpackJsonpblog-articles"]=this["webpackJsonpblog-articles"]||[]).push([[0],{225:function(e,t,a){e.exports=a(395)},249:function(e,t,a){},255:function(e,t,a){},299:function(e,t,a){},379:function(e,t,a){},394:function(e,t,a){},395:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(22),l=a.n(c),u=a(13),i=a(191),o=a(71),s=a(192),m=a(193),f=a(59),d=a(401),p=a(20),b=a.n(p),E=a(60),v=a(61),h=a.n(v),g=a(404);h.a.defaults.baseURL="https://conduit.productionready.io/api/";var O,j,x=function(){return"users"},w=function(){return"users/login"},k=function(){return"user"},N=function(e){return"articles/".concat(e)},y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return"articles?limit=".concat(e,"&offset=").concat(t)},C=function(e){return"articles/".concat(e,"/favorite")},I=Object(g.a)("CHANGE_FETCH_STATUS"),S=Object(g.a)("CHANGE_LOADING_STATUS"),A=Object(g.a)("LOGIN_USER"),z=Object(g.a)("LOGOUT_USER"),L=Object(g.a)("LOAD_ARTICLES_LIST"),T=Object(g.a)("LOAD_CURRENT_ARTICLE"),U=Object(g.a)("FAVORITE_ARTICLE"),q=function(){var e=Object(E.a)(b.a.mark((function e(t,a,n){var r,c;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.a.post(n,{user:t});case 2:r=e.sent,c=r.data,localStorage.setItem("token",c.user.token),a(I(null)),a(A(c.user));case 7:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}(),F=function(e,t){return function(){var a=Object(E.a)(b.a.mark((function a(n){var r,c,l;return b.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return n(S(!0)),a.prev=1,r=y(e,t),a.next=5,h.a.get(r);case 5:c=a.sent,l=c.data,n(L(l)),n(S(!1)),a.next=14;break;case 11:a.prev=11,a.t0=a.catch(1),n(S(!1));case 14:case"end":return a.stop()}}),a,null,[[1,11]])})));return function(e){return a.apply(this,arguments)}}()},_=function(e,t){return function(){var a=Object(E.a)(b.a.mark((function a(n){var r,c;return b.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return n(S(!0)),a.prev=1,a.next=4,q(e,n,w());case 4:n(S(!1)),a.next=14;break;case 7:a.prev=7,a.t0=a.catch(1),r=a.t0.response,c=r.data.errors,n(I(c)),n(S(!1)),t("password","email or password ".concat(c["email or password"]));case 14:case"end":return a.stop()}}),a,null,[[1,7]])})));return function(e){return a.apply(this,arguments)}}()},R=Object(d.a)((O={},Object(f.a)(O,z,(function(){})),Object(f.a)(O,A,(function(e,t){return t.payload})),O),{}),D=Object(d.a)(Object(f.a)({},I,(function(e,t){return t.payload})),{}),G=Object(d.a)(Object(f.a)({},S,(function(e,t){return t.payload})),!1),B=Object(d.a)((j={},Object(f.a)(j,L,(function(e,t){return t.payload})),Object(f.a)(j,U,(function(e,t){var a=t.payload,n=e.articles.filter((function(e){return e.slug===a.slug}));return n[0].favorited=!a.favorited,n[0].favoritesCount=a.favorited?n[0].favoritesCount-1:n[0].favoritesCount+1,Object(m.a)({},e)})),j),{}),H=Object(d.a)(Object(f.a)({},T,(function(e,t){return t.payload})),{}),V=Object(o.combineReducers)({currentUser:R,errors:D,loading:G,articlesData:B,currentArticle:H}),W=(a(169),a(249),a(34)),J=a(9),P=a(194),Z=a.n(P),M=a(141),Y=a(405),$=(a(255),function(){var e=Object(u.b)(),t=Object(u.c)((function(e){return e.currentUser})),a=!!t.id,n=r.a.createElement("nav",null,r.a.createElement("ul",{className:"nav"},r.a.createElement("li",null,r.a.createElement(W.c,{to:"/login",className:"link"},"Sign In")),r.a.createElement("li",null,r.a.createElement(W.c,{to:"/signup",className:"link"},"Sign Up")))),c=r.a.createElement("nav",null,r.a.createElement("ul",{className:"nav"},r.a.createElement("li",null,r.a.createElement(M.a,{size:"large"},"Create Article")),r.a.createElement("li",{className:"link"},t.username),r.a.createElement("li",{className:"link"},r.a.createElement(M.a,{disabled:!1,size:"large",icon:r.a.createElement(Y.a,null),onClick:function(t){t.preventDefault(),localStorage.removeItem("token"),e(z())}},"\u0412\u044b\u0439\u0442\u0438"))));return r.a.createElement("header",{className:"header"},r.a.createElement(W.c,{to:"/",className:"headline"},"\u0413\u043e\u043f-\u0431\u043b\u043e\u0433"),a?c:n)}),K=a(29),Q=a(68),X=a(400),ee=a(402),te=a(397),ae=a(406),ne=a(407),re=a(408),ce=(a(299),Q.a().shape({username:Q.b().max(50,"\u0421\u043b\u0438\u0448\u043a\u043e\u043c \u0434\u043b\u0438\u043d\u043d\u043e - \u043d\u0435 \u0431\u043e\u043b\u0435\u0435 50 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432").required("\u0418\u043c\u044f \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e"),password:Q.b().matches(/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)[a-zA-Z\d\w\W]{6,40}$/,"\u043e\u0442 6 \u0434\u043e 40 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432, \u043a\u0430\u043a \u043c\u0438\u043d\u0438\u043c\u0443\u043c \u043e\u0434\u043d\u0430 \u0446\u0438\u0444\u0440\u0430 \u0438 \u043e\u0434\u043d\u0430 \u0437\u0430\u0433\u043b\u0430\u0432\u043d\u0430\u044f \u0431\u0443\u043a\u0432\u0430").required("\u041f\u0430\u0440\u043e\u043b\u044c \u043d\u0443\u0436\u0435\u043d"),email:Q.b().email("\u041d\u0435\u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u0430\u044f \u043f\u043e\u0447\u0442\u0430").required("\u041f\u043e\u0447\u0442\u0443, \u043f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430")})),le={username:"",password:"",email:""},ue=function(){var e=Object(u.b)();return r.a.createElement("div",{className:"formContainer"},r.a.createElement(K.c,{initialValues:le,validationSchema:ce,onSubmit:function(t,a){var n=a.setFieldError;e(function(e,t){return function(){var a=Object(E.a)(b.a.mark((function a(n){var r,c;return b.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return n(S(!0)),a.prev=1,a.next=4,q(e,n,x());case 4:n(S(!1)),a.next=16;break;case 7:a.prev=7,a.t0=a.catch(1),r=a.t0.response,c=r.data.errors,n(I(c)),n(S(!1)),t("email",c.email),t("username",c.username),t("password",c.password);case 16:case"end":return a.stop()}}),a,null,[[1,7]])})));return function(e){return a.apply(this,arguments)}}()}(t,n))}},r.a.createElement(X.a,{className:"form"},r.a.createElement("h1",null,"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u0438"),r.a.createElement("div",{className:"formItem"},r.a.createElement("label",{htmlFor:"username"},"\u0418\u043c\u044f",r.a.createElement("span",{className:"required-star"}," *")),r.a.createElement(X.a.Item,{name:"username"},r.a.createElement(ee.a,{id:"username",name:"username",placeholder:"\u0418\u0432\u0430\u043d",size:"large",suffix:r.a.createElement(ae.a,null)}))),r.a.createElement("div",{className:"formItem"},r.a.createElement("label",{htmlFor:"email"},"\u042d\u043b\u0435\u043a\u0442\u0440\u043e\u043f\u043e\u0447\u0442\u0430",r.a.createElement("span",{className:"required-star"}," *")),r.a.createElement(X.a.Item,{name:"email"},r.a.createElement(ee.a,{id:"email",name:"email",placeholder:"ivan@mail.ru",size:"large",suffix:r.a.createElement(ne.a,null)}))),r.a.createElement("div",{className:"formItem"},r.a.createElement("label",{htmlFor:"pwd"},"\u041f\u0430\u0440\u043e\u043b\u044c",r.a.createElement("span",{className:"required-star"}," *")),r.a.createElement(X.a.Item,{name:"password"},r.a.createElement(ee.a.Password,{id:"pwd",name:"password",placeholder:"bu7UYvjl2nkj9WNshd",size:"large",autoComplete:"off"}))),r.a.createElement("div",{className:"formButtonsContainer"},r.a.createElement(te.a,{loading:!1,disabled:!1,size:"large",shape:"round",icon:r.a.createElement(re.a,null),className:"button"},"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f")))),r.a.createElement("div",{className:"link-container"},r.a.createElement("span",null,"\u0423\u0436\u0435 \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043b\u0438\u0441\u044c? "),r.a.createElement(W.b,{to:"/login"},"\u0412\u043e\u0439\u0442\u0438")))},ie=a(409),oe=(a(379),{password:"",email:""}),se=Q.a().shape({password:Q.b().required("\u041f\u0430\u0440\u043e\u043b\u044c \u043d\u0443\u0436\u0435\u043d"),email:Q.b().email("\u041d\u0435\u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u0430\u044f \u043f\u043e\u0447\u0442\u0430").required("\u041f\u043e\u0447\u0442\u0443, \u043f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430")}),me=function(){var e=Object(u.b)(),t=function(){var t=Object(E.a)(b.a.mark((function t(a,n){var r;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=n.setFieldError,e(_(a,r));case 2:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}();return r.a.createElement("div",{className:"formContainer"},r.a.createElement(K.c,{initialValues:oe,validationSchema:se,onSubmit:t},r.a.createElement(X.a,null,r.a.createElement("h1",null,"\u0412\u0445\u043e\u0434"),r.a.createElement("div",{className:"formItem"},r.a.createElement("label",{htmlFor:"email"},"\u042d\u043b\u0435\u043a\u0442\u0440\u043e\u043f\u043e\u0447\u0442\u0430",r.a.createElement("span",{className:"required-star"}," *")),r.a.createElement(X.a.Item,{name:"email"},r.a.createElement(ee.a,{id:"email",name:"email",placeholder:"ivan@mail.ru",size:"large",suffix:r.a.createElement(ne.a,null)}))),r.a.createElement("div",{className:"formItem"},r.a.createElement("label",{htmlFor:"pwd"},"\u041f\u0430\u0440\u043e\u043b\u044c",r.a.createElement("span",{className:"required-star"}," *")),r.a.createElement(X.a.Item,{name:"password"},r.a.createElement(ee.a.Password,{id:"pwd",name:"password",size:"large",autoComplete:"off"}))),r.a.createElement("div",{className:"formButtonsContainer"},r.a.createElement(te.a,{loading:!1,disabled:!1,size:"large",shape:"round",icon:r.a.createElement(ie.a,null),className:"button"},"\u0412\u043e\u0439\u0442\u0438")))),r.a.createElement("div",{className:"link-container"},r.a.createElement(W.b,{to:"/signup"},"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f")))},fe=a(399),de=a(410),pe=a(411),be=a(398),Ee=a(26),ve=a(27);function he(){var e=Object(Ee.a)(["\n  border-radius: 50%;\n"]);return he=function(){return e},e}function ge(){var e=Object(Ee.a)(["\n  margin-right: 10px;\n"]);return ge=function(){return e},e}function Oe(){var e=Object(Ee.a)(["\n  display: flex;\n"]);return Oe=function(){return e},e}function je(){var e=Object(Ee.a)(["\n  background-color: transparent;\n  border: none;\n  cursor: pointer;\n  padding: 0;\n  :focus {\n    outline: none;\n    /* outline-color: blue; */\n  }\n"]);return je=function(){return e},e}function xe(){var e=Object(Ee.a)(["\n  text-align: center;\n  padding: 5px;\n"]);return xe=function(){return e},e}function we(){var e=Object(Ee.a)(["\n  padding: 0 10px;\n  margin-right: 10px;\n  border: 1px solid gray;\n  border-radius: 5px;\n"]);return we=function(){return e},e}function ke(){var e=Object(Ee.a)(["\n  display: flex;\n  flex-direction: row;\n  flex-wrap: wrap;\n"]);return ke=function(){return e},e}function Ne(){var e=Object(Ee.a)(["\n  margin-right: 10px;\n  display: inline-block;\n  color: #1890ff;\n  text-align: left;\n"]);return Ne=function(){return e},e}function ye(){var e=Object(Ee.a)(["\n  display: flex;\n  justify-content: space-between;\n  margin: 20px 0;\n  padding: 20px;\n  text-decoration: none;\n  list-style: none;\n  background-color: white;\n  box-shadow: 0px 4px 12px rgba(0, 0, 0, 0.15);\n  border-radius: 5px;\n  min-height: 140px;\n"]);return ye=function(){return e},e}function Ce(){var e=Object(Ee.a)(["\n  padding: 0;\n  margin: 0 auto;\n  max-width: 900px;\n"]);return Ce=function(){return e},e}var Ie=ve.a.ul(Ce()),Se=ve.a.li(ye()),Ae=ve.a.h2(Ne()),ze=ve.a.div(ke()),Le=ve.a.span(we()),Te=ve.a.div(xe()),Ue=ve.a.button(je()),qe=ve.a.div(Oe()),Fe=ve.a.div(ge()),_e=ve.a.img(he()),Re=function(){var e=Object(u.b)(),t=Object(u.c)((function(e){return e.articlesData})),a=t.articles,n=t.articlesCount,c=void 0===n?1:n,l=!!Object(u.c)((function(e){return e.currentUser})).id,i=function(t,a){e(function(e,t){return function(){var a=Object(E.a)(b.a.mark((function a(n){var r;return b.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return n(S(!0)),a.prev=1,r=C(e,t),a.next=5,t?h.a.delete(r):h.a.post(r);case 5:n(U({slug:e,favorited:t})),n(S(!1)),a.next=12;break;case 9:a.prev=9,a.t0=a.catch(1),n(S(!1));case 12:case"end":return a.stop()}}),a,null,[[1,9]])})));return function(e){return a.apply(this,arguments)}}()}(t,a))},o=r.a.createElement(Ie,{className:"articlesList"},a?a.map((function(e){var t=e.slug,a=e.title,n=e.tagList,c=e.author,u=e.createdAt,o=e.favoritesCount,s=e.favorited;return r.a.createElement(Se,{key:t,className:"article"},r.a.createElement("div",{className:"articleInfo"},r.a.createElement(W.c,{to:"/articles/".concat(t)},r.a.createElement(Ae,null,a)),l?r.a.createElement(Ue,{type:"button",onClick:function(){return i(t,s)}},s?r.a.createElement(de.a,null):r.a.createElement(pe.a,null)):r.a.createElement(pe.a,null)," ",o,r.a.createElement(ze,null,n.map((function(e){return r.a.createElement(Le,{key:e,className:"tag"},e)})))),r.a.createElement(qe,{className:"articleAuthor"},r.a.createElement(Fe,null,c.username,r.a.createElement("br",null),Object(be.a)(new Date(u),Date.now(),{includeSeconds:!0})),r.a.createElement(_e,{src:c.image,alt:"",width:"46",height:"46"})))})):null);return r.a.createElement(r.a.Fragment,null,o,r.a.createElement(Te,null,r.a.createElement(fe.a,{total:c,onChange:function(t,a){e(F(a,t*a-a))},showSizeChanger:!1,defaultCurrent:1})))};function De(){var e=Object(Ee.a)(["\n  padding: 5px;\n  border: 1px solid green;\n"]);return De=function(){return e},e}function Ge(){var e=Object(Ee.a)(["\n  font-size: 24px;\n  color: black;\n"]);return Ge=function(){return e},e}function Be(){var e=Object(Ee.a)(["\n  opacity: 0.7;\n"]);return Be=function(){return e},e}function He(){var e=Object(Ee.a)(["\n  font-size: 40px;\n  color: #1890ff;\n"]);return He=function(){return e},e}function Ve(){var e=Object(Ee.a)(["\n  padding: 0;\n  margin: 0 auto;\n  width: 80%;\n"]);return Ve=function(){return e},e}var We=ve.a.div(Ve()),Je=ve.a.div(He()),Pe=ve.a.div(Be()),Ze=ve.a.div(Ge()),Me=ve.a.span(De()),Ye=function(){var e=Object(u.b)(),t=Object(J.g)().slug;Object(n.useEffect)((function(){e(function(e){return function(){var t=Object(E.a)(b.a.mark((function t(a){var n,r,c;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a(S(!0)),t.prev=1,n=N(e),t.next=5,h.a.get(n);case 5:r=t.sent,c=r.data.article,a(T(c)),a(S(!1)),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(1),a(S(!1));case 14:case"end":return t.stop()}}),t,null,[[1,11]])})));return function(e){return t.apply(this,arguments)}}()}(t))}),[]);var a=Object(u.c)((function(e){return e.currentArticle})),c=a.title,l=a.body,i=a.createdAt,o=a.updatedAt,s=a.tagList,m=a.description,f=a.author,d=a.favorited,p=a.favoritesCount;return r.a.createElement(We,null,r.a.createElement(Je,null,c),r.a.createElement(Pe,null,m),r.a.createElement(Me,null,s),r.a.createElement(Ze,null,l),r.a.createElement("br",null),i,r.a.createElement("br",null),o,r.a.createElement("br",null),f?f.username:null,r.a.createElement("br",null),d?r.a.createElement("p",null,"liked"):r.a.createElement("p",null,"notLiked"),r.a.createElement("br",null),p)},$e=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("h1",null,"404"),r.a.createElement("h2",null,"\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u0430 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u0430"))},Ke=a(222),Qe=function(e){var t=e.component,a=Object(Ke.a)(e,["component"]);return r.a.createElement(J.b,Object.assign({},a,{render:function(){return localStorage.getItem("token")?r.a.createElement(J.a,{to:"/"}):r.a.createElement(t,null)}}))},Xe=(a(394),function(){var e=Object(u.b)(),t=Object(u.c)((function(e){return e.currentUser})),a=Object(u.c)((function(e){return e.loading}));return Object(n.useEffect)((function(){e(function(){var e=Object(E.a)(b.a.mark((function e(t){var a,n,r,c,l;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=localStorage,n=a.token){e.next=3;break}return e.abrupt("return");case 3:return t(S(!0)),e.prev=4,e.next=7,h.a.interceptors.request.use((function(e){return e.headers.Authorization="Token ".concat(n),e}));case 7:return r=k(),e.next=10,h.a.get(r);case 10:c=e.sent,l=c.data,t(A(l.user)),t(S(!1)),e.next=20;break;case 16:e.prev=16,e.t0=e.catch(4),401===e.t0.response.status&&localStorage.removeItem("token"),t(S(!1));case 20:case"end":return e.stop()}}),e,null,[[4,16]])})));return function(t){return e.apply(this,arguments)}}())}),[t.id]),Object(n.useEffect)((function(){e(F())}),[]),r.a.createElement(W.a,null,r.a.createElement($,null),r.a.createElement(Z.a,{loaded:!a,className:"loader"}),r.a.createElement(J.d,null,r.a.createElement(J.b,{exact:!0,path:"/",component:Re}),r.a.createElement(J.b,{path:"/articles/:slug",component:Ye}),r.a.createElement(Qe,{exact:!0,path:"/login",component:me}),r.a.createElement(Qe,{exact:!0,path:"/signup",component:ue}),r.a.createElement(J.b,{path:"*",component:$e})))}),et=Object(o.createStore)(V,Object(s.composeWithDevTools)(Object(o.applyMiddleware)(i.a)));l.a.render(r.a.createElement(u.a,{store:et},r.a.createElement(Xe,null)),document.getElementById("root"))}},[[225,1,2]]]);
//# sourceMappingURL=main.c3d98245.chunk.js.map